(this.webpackJsonprecommender=this.webpackJsonprecommender||[]).push([[0],{155:function(e,t,a){},182:function(e,t,a){e.exports=a(337)},187:function(e,t,a){},188:function(e,t,a){},336:function(e,t,a){},337:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),i=a(27),r=a.n(i),o=(a(187),a(10)),l=a(11),c=a(12),m=a(13),u=a(14),d=a(8),g=a(41),h=(a(188),function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"Circle"}),s.a.createElement("h1",{className:"fadeInLeft1"},"Welcome!"),s.a.createElement("p",{className:"textLanding fadeInLeft2"},"Let's get you started."),s.a.createElement(d.b,{to:"/profile"},s.a.createElement("button",{className:"StartButton fadeInLeft3"},s.a.createElement("b",null,"CONTINUE"))),s.a.createElement("div",{className:"plate1 fadeInRight1"}," "),s.a.createElement("div",{className:"plate2 fadeInRight2"}," "),s.a.createElement("div",{className:"plate3 fadeInRight3"}," "))}}]),t}(s.a.Component)),p=a(6),f=a(4),v=a(49),b=(a(81),a(82),a(18)),k=a(46),E=a.n(k),N=a(40),S=(a(62),a(5)),w=a.n(S),y=a(51),I=a(341),O=a(50),T=a.n(O);function x(){var e=Object(v.a)(["\n  display: flex;\n  transition: ",";\n  transform: ",";\n"]);return x=function(){return e},e}y.a.div(x(),(function(e){return e.sliding?"none":"transform 1s ease"}),(function(e){return e.sliding?"PREV"===e.dir?"translateX(calc(2 * (-80% - 20px)))":"translateX(0%)":"translateX(calc(-80% - 20px))"}));function C(e){var t=e;try{t=e[0].toUpperCase()+e.slice(1)}catch(a){}return t}function F(e){var t,a;return e<50?(t=255,a=Math.round(5.1*e)):(a=255,t=Math.round(510-5.1*e)),"#"+("000000"+(65536*t+256*a+0).toString(16)).slice(-6)}var L=function(e){return new Promise((function(t){return setTimeout(t,e)}))},j=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={foods:[],tags:[],images:[],recipe:[],nutrition:[],ingredients:[],similar:[]},e.socket=e.initialiseSocket(),e.sendable=!1,e.generateMeal=e.generateMeal.bind(Object(f.a)(e)),e.getRecommendations=e.getRecommendations.bind(Object(f.a)(e)),e.switchViews=e.switchViews.bind(Object(f.a)(e)),e.generateView=e.generateView.bind(Object(f.a)(e)),e.resetSwipes=e.resetSwipes.bind(Object(f.a)(e)),e.generateFavorites=e.generateFavorites.bind(Object(f.a)(e)),e.goToFavorites=e.goToFavorites.bind(Object(f.a)(e)),e.goToRecommends=e.goToRecommends.bind(Object(f.a)(e)),e.generateBadges=e.generateBadges.bind(Object(f.a)(e)),e.swipeItem=e.swipeItem.bind(Object(f.a)(e)),e.saveAlert=e.saveAlert.bind(Object(f.a)(e)),e.createCards=e.createCards.bind(Object(f.a)(e)),e.socket.onopen=function(){for(var t=JSON.parse(localStorage.getItem("users")),a={action:"initialise"},n=t.length-1;n>=0;n--){if(t[n].Name===localStorage.getItem("currentUser"))a={action:"initialise",favorites:t[n].Liked,name:localStorage.getItem("currentUser")}}e.socket.send(JSON.stringify(a)),e.sendable||(e.loading=!1,e.sendable=!0,e.state.favorite?e.goToFavorites():e.getRecommendations())},e.state.favorite=JSON.parse(localStorage.getItem("favorite")),e.socket.onmessage=function(t){var a=JSON.parse(t.data);switch(console.log(a),a.action){case"Recommends":e.loading&&(e.loading=!1,w.a.fire({title:"Finished!",showConfirmButton:!1,timer:1e3}));for(var n=JSON.parse(localStorage.getItem("users")),s=n.length-1;s>=0;s--)n[s].Name===localStorage.getItem("currentUser")&&(n[s].FirstTime1?(w.a.fire({text:"Drag an item left to dislike it, or right to like it.",icon:"info",confirmButtonText:"Okay!"}).then((function(){S.clickConfirm&&w.a.fire({text:"To see the recipe of the dish or the nutritional values, press the small buttons on the cards.",icon:"info",confirmButtonText:"Okay!"}).then((function(){S.clickConfirm&&w.a.fire({text:"You can navigate to your profile and to your liked items by clicking on the icons on top of the page. ",icon:"info",confirmButtonText:"Okay!"})}))})),n[s].FirstTime1=!1,n[s].FirstTime2=!1,localStorage.setItem("users",JSON.stringify(n))):n[s].FirstTime2&&(w.a.fire({title:"You're getting the hang of this!",icon:"success",confirmButtonText:"Okay!"}).then((function(){S.clickConfirm&&w.a.fire({text:"To see the recipe of the dish or the nutritional values, press the small buttons on the cards.",icon:"info",confirmButtonText:"Okay!"}).then((function(){S.clickConfirm&&w.a.fire({text:"You can navigate to your profile and to your liked items by clicking on the icons on top of the page. ",icon:"info",confirmButtonText:"Okay!"})}))})),n[s].FirstTime2=!1,localStorage.setItem("users",JSON.stringify(n))));var i=a.recommends,r=a.tags,o=a.images,l=e.filterfoods(i,r,o),c=l[0],m=l[1],u=l[2];e.setState({tags:m}),e.setState({foods:c}),e.setState({images:u}),localStorage.setItem("viewInit",1),1==JSON.parse(localStorage.getItem("viewInit"))&&1!=e.state.initialised&&(e.state.view=0,L(5).then((function(){if(e.state.view=JSON.parse(localStorage.getItem("viewInit")),1==e.state.view){e.state.swipednumber=0;var t=(e.state.view+1)%2;localStorage.setItem("view",t),e.state.initialised=!0,e.setState({view:1})}})));break;case"favorites":if(e.loading){e.loading=!1,w.a.fire({title:"Finished!",showConfirmButton:!1,timer:1e3});for(var d=JSON.parse(localStorage.getItem("users")),g=d.length-1;g>=0;g--)d[g].Name===localStorage.getItem("currentUser")&&d[g].FirstTime3&&(w.a.fire({title:"Do not lose any of your liked recipes!",text:"You can find them here!",icon:"info"}),d[g].FirstTime3=!1,localStorage.setItem("users",JSON.stringify(d)))}e.setState({favorites:a.favorites});break;case"Similar":e.loading=!1,w.a.fire({title:"Finished!",showConfirmButton:!1,timer:1e3}),e.setState({similar:a.similar});break;case"Recipe":e.setState({recipe:a.recipe});break;case"Nutrition":e.setState({nutrition:a.nutrition});break;case"Ingredients":e.setState({ingredients:a.ingredients})}},void 0===e.state.swipednumber&&(e.state.swipednumber=0),e.state.favorite&&e.goToFavorites(),void 0!=e.state.initialised&&0!=e.state.initialised||(e.state.view=0),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"filterfoods",value:function(e,t,a){for(var n=function(e,t,a){for(var n,s,i=e.length;0!==i;)s=Math.floor(Math.random()*i),n=e[i-=1],e[i]=e[s],e[s]=n,n=t[i],t[i]=t[s],t[s]=n,n=a[i],a[i]=a[s],a[s]=n;var r=[];return r.push(e,t,a),r}(e,t,a),s=n[0],i=n[1],r=n[2],o=null,l=null,c=JSON.parse(localStorage.getItem("users")),m=c.length-1;m>=0;m--)c[m].Name===localStorage.getItem("currentUser")&&(o=c[m].Liked,l=c[m].Disliked);null==o&&(o=[]),null==l&&(l=[]);for(var u=[],d=[],g=[],h=0,p=0;h<7;p++)""===s[p]||o.includes(s[p])||l.includes(s[p])||(h++,u.push(s[p]),d.push(i[p]),g.push(r[p]));var f=[];return f.push(u,d,g),f}},{key:"initialiseSocket",value:function(){return void 0!==this.socket?this.socket:(this.setState({favorite:!1}),new WebSocket("ws://2a02:a03f:4a1b:5100:8473:6145:3b2f:6b2e:9000"))}},{key:"getInfo",value:function(e){this.sendRecipe(e),this.sendNuttritionSimilar(e)}},{key:"sendRecipe",value:function(e){e=e.toLowerCase(),console.log("send recipe"),this.socket=this.initialiseSocket();var t={action:"Recipe",recipe:e},a={action:"Ingredients",name:e};void 0!==this.sendable&&this.sendable&&(this.socket.send(JSON.stringify(t)),this.socket.send(JSON.stringify(a)))}},{key:"sendNuttritionSimilar",value:function(e){e=e.toLowerCase(),this.socket=this.initialiseSocket();var t={action:"Nutrition",name:e};void 0!==this.sendable&&this.sendable&&this.socket.send(JSON.stringify(t));for(var a={action:"Similar",recipe:e,prolist:[]},n=JSON.parse(localStorage.getItem("users")),s=null,i=null,r=n.length-1;r>=0;r--)n[r].Name===localStorage.getItem("currentUser")&&(s=n[r].Liked,i=n[r].Disliked);null==s&&(s=[]),null==i&&(i=[]);for(var o=[],l=0;l<s.length;l++)if(s[l]!=e){var c={};c.name=s[l],c.rating=1,o.push(c)}for(var m=0;m<i.length;m++){var u={};u.name=i[m],u.rating=-1,o.push(u)}a.prolist=o,this.state.proto=!this.state.proto,this.sendable&&this.state.proto&&(this.socket.send(JSON.stringify(a)),w.a.fire({title:"Loading...",text:"Please wait",showConfirmButton:!1,allowOutsideClick:!1}))}},{key:"getFavorites",value:function(){for(var e=JSON.parse(localStorage.getItem("users")),t=null,a=e.length-1;a>=0;a--)e[a].Name===localStorage.getItem("currentUser")&&(t=e[a].Liked);null==t&&(t=[]);for(var n={action:"Favorites",prolist:[{name:"hot tamale  burgers",rating:.5}]},s=(JSON.parse(localStorage.getItem("boxes")),[]),i=0;i<t.length;i++){var r={};r.name=t[i],r.rating=1,s.push(r)}n.prolist=s,console.log(s),console.log(n),this.sendable&&(this.socket.send(JSON.stringify(n)),w.a.fire({title:"Loading...",text:"Please wait",showConfirmButton:!1,allowOutsideClick:!1}),this.loading=!0)}},{key:"getRecommendations",value:function(){for(var e=JSON.parse(localStorage.getItem("users")),t=-1,a=null,n=null,s=e.length-1;s>=0;s--)if(e[s].Name===localStorage.getItem("currentUser")){for(t=s,a=[];a.size<e[s].Liked.Length||a.size<7;){var i=Math.random(e[s].Liked.length);a.includes(e[s].Liked[i],0)&&a.push(e[s].Liked[i])}for(n=[];n.size<e[s].Disliked.Length||n.size<5;){var r=Math.random(e[s].DisLiked.length);n.includes(e[s].Disliked[r],0)&&n.push(e[s].Disliked[r])}}null==a&&(a=[]),null==n&&(n=[]);var o={action:"Recommend",account:{vegan:1,easy:1,preparation:1},amount:7,prolist:[{name:"hot tamale  burgers",rating:.5}]},l=7;null!=a&&void 0!==a&&(l+=a.length),null!=n&&void 0!==n&&(l+=n.length),o.amount=l;for(var c=e[t].Preferences,m=e[t].booleansPreferences,u=0;u<c.length;u++)c[u]=c[u].toLowerCase();for(var d={},g=0;g<c.length;g++)!0===m[g]&&(d[c[g]]=1);console.log(d),o.account=d,console.log(o);for(var h=[],p=0;p<a.length;p++){var f={};f.name=a[p],f.rating=1,h.push(f)}for(var v=0;v<n.length;v++){var b={};b.name=n[v],b.rating=-1,h.push(b)}o.prolist=h,console.log(h),o.account=d,console.log(o),console.log(o),this.sendable&&(this.socket.send(JSON.stringify(o)),w.a.fire({title:"Loading...",text:"Please wait",showConfirmButton:!1,allowOutsideClick:!1}),this.state.initialised=!1,this.loading=!0)}},{key:"nutritionalPopup",value:function(e){var t=["Carbs","Total Fats","Sugar","Sodium","Protein","Saturated Fats","Carbohydrates"],a=this.getNutritionInfo(e),n=[],i=[],r=[],o=[],l=this.getExplanation(),c=C(e);if(void 0!==a)for(var m=0;m<a.length;m++)i.push(s.a.createElement("div",{className:"popupText"},t[m],s.a.createElement("br",null))),r.push(s.a.createElement("div",{className:"popupText"},a[m],s.a.createElement("br",null)));var u=!0;if(void 0!==l)for(var d=0;d<l.length;d++){var g=Math.floor(100*l[d].matchfactor),h=F(g);g>=60&&(u=!1,o.push(s.a.createElement("div",{className:"popupText2"},s.a.createElement("div",{className:"container2"},s.a.createElement("img",{className:"FoodPhotoLarge3",onClick:this.goToFavorites,title:l[d].name,align:"left",src:l[d].image,alt:"Food"}),s.a.createElement("button",{className:"OnTopButton",style:{backgroundColor:h}},g,"%")),s.a.createElement("br",null))))}return u?n.push(s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"Nutritioncolumn"},s.a.createElement("div",{className:"popupTextTitle"},"Nutritional info:",s.a.createElement("br",null)),s.a.createElement("div",{className:"textrow"},s.a.createElement("div",{className:"textcolumn1"},i),s.a.createElement("div",{className:"textcolumn2"},r))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"popupTextTitle2"},"You did not try anything like this! Try it out!",s.a.createElement("br",null))))):n.push(s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"Nutritioncolumn"},s.a.createElement("div",{className:"popupTextTitle"},"Nutritional info:",s.a.createElement("br",null)),s.a.createElement("div",{className:"textrow"},s.a.createElement("div",{className:"textcolumn1"},i),s.a.createElement("div",{className:"textcolumn2"},r))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"popupTextTitle2"},"Because you liked:",s.a.createElement("br",null)),o))),[s.a.createElement(b.a,{modal:!0,trigger:s.a.createElement("button",{title:"nutrition",className:"IconLayout NutritionIcon"})},s.a.createElement("div",{className:"popUp2"},s.a.createElement("div",{className:"popupHeader"},"Nutritional info for",s.a.createElement("br",null),c),s.a.createElement("br",null),n))]}},{key:"recipePopup",value:function(e,t){var a=this,n=this.getRecipe(),i=[],r=this.getIngredients(),o=[],l=[],c=C(e);if(void 0!==r)for(var m=0;m<r.length;m++)l.push(s.a.createElement("div",{className:"popupText"},r[m],s.a.createElement("br",null)));if(void 0!==n)for(var u=0;u<n.length;u++)i.push(s.a.createElement("div",{className:"popupRecipeText"},u+1,". ",n[u],s.a.createElement("br",null)));o.push(s.a.createElement("div",{className:"row:after"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"rowingredi"},s.a.createElement("div",{className:"popupTextTitle"},"Ingredients:",s.a.createElement("br",null)),l),s.a.createElement("div",{className:"row2"},s.a.createElement("img",{className:"FoodPhotoLarge",align:"left",src:t,alt:"Food"}))),s.a.createElement("div",{className:"column2"},s.a.createElement("div",{className:"reciperow"},s.a.createElement("div",{className:"popupTextTitleRecipe"},"Steps:",s.a.createElement("br",null)),i))));var d=[];return d.push(s.a.createElement(b.a,{className:"poptry",modal:!0,trigger:s.a.createElement("button",{title:"recipe",className:"IconLayout RecipeIcon",onClick:function(){return a.sendRecipe(e)}}),position:"right center"},s.a.createElement("div",{className:"popUp2"},s.a.createElement("div",{className:"popupHeader"},"Recipe for",s.a.createElement("br",null),c),s.a.createElement("br",null),o))),d}},{key:"recipePopupForTinder",value:function(e,t){var a,n=this,i=this.getRecipe(),r=[],o=this.getIngredients(),l=[],c=[],m=C(e);if(void 0!==o)for(var u=0;u<o.length;u++)c.push(s.a.createElement("div",{className:"popupText"},o[u],s.a.createElement("br",null)));if(void 0!==i)for(var d=0;d<i.length;d++)r.push(s.a.createElement("div",{className:"popupRecipeText"},d+1,". ",i[d],s.a.createElement("br",null)));l.push(s.a.createElement("div",{className:"row:after"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"rowingredi"},s.a.createElement("div",{className:"popupTextTitle"},"Ingredients:",s.a.createElement("br",null)),c),s.a.createElement("div",{className:"row2"},s.a.createElement("img",{className:"FoodPhotoLarge3",onClick:function(){return n.setState({open:!1})},align:"left",src:t,alt:"Food"}))),s.a.createElement("div",{className:"column2"},s.a.createElement("div",{className:"reciperow"},s.a.createElement("div",{className:"popupTextTitleRecipe"},"Steps:",s.a.createElement("br",null)),r))));var g=[];return g.push(s.a.createElement("div",null,s.a.createElement("button",(a={title:"recipe",className:"RecipeButton"},Object(p.a)(a,"title","recipe"),Object(p.a)(a,"align","left"),Object(p.a)(a,"onClick",(function(){n.sendRecipe(e),n.setState({opened:e}),n.logAction("get recipe",e)})),Object(p.a)(a,"src",t),a)),s.a.createElement(b.a,{open:this.state.opened==e,onClick:function(){return n.setState({opened:"none"})},closeOnDocumentClick:!0,position:"right center"},s.a.createElement("div",{className:"popUp3",onClick:function(){n.setState({opened:"none"}),n.logAction("get recipe",e)}},s.a.createElement("div",{className:"popupHeader",onClick:function(){return n.setState({opened:"none"})}},"Recipe for",s.a.createElement("br",null),m),s.a.createElement("br",null),l)))),g}},{key:"recipePopupFromImage",value:function(e,t){var a=this,n=this.getRecipe(),i=[],r=this.getIngredients(),o=[],l=[],c=C(e);if(void 0!==r)for(var m=0;m<r.length;m++)l.push(s.a.createElement("div",{className:"popupText"},r[m],s.a.createElement("br",null)));if(void 0!==n)for(var u=0;u<n.length;u++)i.push(s.a.createElement("div",{className:"popupRecipeText"},u+1,". ",n[u],s.a.createElement("br",null)));o.push(s.a.createElement("div",{className:"row:after"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"rowingredi"},s.a.createElement("div",{className:"popupTextTitle"},"Ingredients:",s.a.createElement("br",null)),l),s.a.createElement("div",{className:"row2"},s.a.createElement("img",{className:"FoodPhotoLarge3",onClick:function(){return a.setState({open:!1})},align:"left",src:t,alt:"Food"}))),s.a.createElement("div",{className:"column2"},s.a.createElement("div",{className:"reciperow"},s.a.createElement("div",{className:"popupTextTitleRecipe"},"Steps:",s.a.createElement("br",null)),i))));var d=[];return d.push(s.a.createElement("div",null,s.a.createElement("img",{className:"FoodPhotoTinder",title:"recipe",align:"left",onClick:function(){a.sendRecipe(e),a.setState({open:!0})},src:t}),s.a.createElement(b.a,{open:!1,onClick:function(){return a.setState({open:!1})},closeOnDocumentClick:!0,position:"right center"},s.a.createElement("div",{className:"popUp3",onClick:function(){return a.setState({open:!1})}},s.a.createElement("div",{className:"popupHeader",onClick:function(){return a.setState({open:!1})}},"Recipe for",s.a.createElement("br",null),c),s.a.createElement("br",null),o)))),d}},{key:"nutritionalPopupForTinder",value:function(e,t){var a,n=this,i=["Carbs","Total Fats","Sugar","Sodium","Protein","Saturated Fats","Carbohydrates"],r=this.getNutritionInfo(e),o=[],l=[],c=[],m=[],u=this.getExplanation(),d=C(e);if(void 0!==r)for(var g=0;g<r.length;g++)l.push(s.a.createElement("div",{className:"popupText"},i[g],s.a.createElement("br",null))),c.push(s.a.createElement("div",{className:"popupText"},r[g],s.a.createElement("br",null)));var h=!0;if(void 0!==u)for(var f=0;f<u.length;f++){var v=Math.floor(100*u[f].matchfactor),k=F(v);v>=60&&(h=!1,m.push(s.a.createElement("div",{className:"popupText2"},s.a.createElement("div",{className:"container2"},s.a.createElement("img",{className:"FoodPhotoLarge3",onClick:this.goToFavorites,title:u[f].name,align:"left",src:u[f].image,alt:"Food"}),s.a.createElement("button",{className:"OnTopButton",style:{backgroundColor:k}},v,"%")),s.a.createElement("br",null))))}h?o.push(s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"Nutritioncolumn"},s.a.createElement("div",{className:"popupTextTitle"},"Nutritional info:",s.a.createElement("br",null)),s.a.createElement("div",{className:"textrow"},s.a.createElement("div",{className:"textcolumn1"},l),s.a.createElement("div",{className:"textcolumn2"},c))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"popupTextTitle2"},"You did not try anything like this! Try it out!",s.a.createElement("br",null))))):o.push(s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"Nutritioncolumn"},s.a.createElement("div",{className:"popupTextTitle"},"Nutritional info:",s.a.createElement("br",null)),s.a.createElement("div",{className:"textrow"},s.a.createElement("div",{className:"textcolumn1"},l),s.a.createElement("div",{className:"textcolumn2"},c))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"popupTextTitle2"},"Because you liked:",s.a.createElement("br",null)),m)));var E=[];return E.push(s.a.createElement("div",null,s.a.createElement("button",(a={title:"recipe",className:"NutritionButton"},Object(p.a)(a,"title","Nutrition"),Object(p.a)(a,"align","left"),Object(p.a)(a,"onClick",(function(){n.sendNuttritionSimilar(e),n.setState({nutritionopened:e}),n.logAction("get nutritional values",e)})),Object(p.a)(a,"src",t),a)),s.a.createElement(b.a,{open:this.state.nutritionopened==e,onClick:function(){return n.setState({nutritionopened:"none"})},closeOnDocumentClick:!0,position:"right center"},s.a.createElement("div",{className:"popUp3",onClick:function(){return n.setState({nutritionopened:"none"})}},s.a.createElement("div",{className:"popupHeader",onClick:function(){n.setState({nutritionopened:"none"}),n.logAction("get nutritional values",e)}},"Recipe for",s.a.createElement("br",null),d),s.a.createElement("br",null),o)))),E}},{key:"getIngredients",value:function(e){return this.state.ingredients}},{key:"getRecipe",value:function(e){return this.state.recipe}},{key:"getNutritionInfo",value:function(e){return this.state.nutrition}},{key:"getExplanation",value:function(){return this.state.similar}},{key:"getAssets",value:function(){return this.state.tags}},{key:"saveAlert",value:function(){this.getRecommendations()}},{key:"swipeItem",value:function(e){var t=this.state.foods[this.state.swipednumber];"left"===e?this.dislike(t):"right"===e&&this.like(t)}},{key:"resetSwipes",value:function(){this.state.swipednumber=0,this.getRecommendations(),this.setState({view:1}),this.setState({favorite:!1}),localStorage.setItem("view",1)}},{key:"switchViews",value:function(){this.state.swipednumber=0;var e=(this.state.view+1)%2;localStorage.setItem("viewInit",e),this.setState({view:e}),this.setState({favorite:!1}),localStorage.setItem("view",e)}},{key:"goToFavorites",value:function(){this.getFavorites(),localStorage.setItem("favorite",JSON.stringify(!0)),this.setState({favorite:!0})}},{key:"goToRecommends",value:function(){this.getRecommendations(),localStorage.setItem("favorite",JSON.stringify(!1)),this.setState({view:0,favorite:!1,initialised:!1})}},{key:"createCards",value:function(){for(var e=[],t=0;t<this.state.foods.length;t++){var a="card"+t;e.push(s.a.createElement("div",{className:"card",ref:a},s.a.createElement("div",{className:"FoodHeader"},s.a.createElement("b",null,C(this.state.foods[t]))),this.recipePopupFromImage(this.getname(t),this.getimage(t)),this.generateBadges(t),s.a.createElement("div",{className:"tablerow3"},this.recipePopupForTinder(this.state.foods[t],this.getimage(t)),this.nutritionalPopupForTinder(this.state.foods[t]))))}return e}},{key:"generateView",value:function(){var e=this;return this.state.favorite?s.a.createElement("div",null,s.a.createElement("div",{className:"Listing"},"favoritestate",this.generateFavorites())):0===this.state.view?s.a.createElement("div",null,s.a.createElement("div",{className:"Listing"},this.generateMeal()),s.a.createElement("div",{className:"buttons"},s.a.createElement("br",null),s.a.createElement("button",{className:"NextButton Green",onClick:this.saveAlert},s.a.createElement("b",null,"Recommend!")))):s.a.createElement("div",null,s.a.createElement("div",{id:"viewport"},s.a.createElement("div",{className:"dislikeStack"},s.a.createElement("b",null,"Dislike")),s.a.createElement("div",{className:"likeStack"},s.a.createElement("b",null,"Like")),s.a.createElement(T.a,{className:"stack",tagName:"div",setStack:function(t){return e.setState({stack:t})},ref:this.stackEl,throwoutleft:function(){return e.dislike("")},throwoutright:function(){return e.like("")}},this.createCards())),s.a.createElement("div",{className:"buttons"},s.a.createElement("br",null),s.a.createElement("button",{className:"NextButton Green",onClick:this.saveAlert},s.a.createElement("b",null,"Recommend!"))))}},{key:"generateFavorites",value:function(){var e=this,t=this.state.favorites;if(null!=t&&void 0!=t){for(var a=[],n=function(n){var i=t[n],r=i.name,o=i.image,l=[];void 0==i.tags||0!=i.tags.length&&(i.tags.length<=1?l.push(s.a.createElement("button",{className:"FoodBadge "+i.tags})):i.tags.forEach((function(e,t){var a="FoodBadge "+e;"15-minutes-or-less"===e&&(a="FoodBadge fifteen-minutes-or-less"),l.push(s.a.createElement("button",{className:a}))})));var c="FoodItem fadeInLeft"+n,m={onSwiped:function(){return e.endSwipe()},onSwipedLeft:function(){return e.unlike(r)},display:"flex",preventDefaultTouchmoveEvent:!0,trackMouse:!0,transition:"transform 1s ease",delta:10},u=[];e.state.showThumbs!=r&&void 0==e.state.translation||e.state.showThumbs!=r&&void 0==e.state.translation[r]||(Math.abs(e.state.shadownr)>10&&e.state.shadownr>0?u.push(s.a.createElement("div",null,s.a.createElement("img",{className:"dislikedimagewithshadow2"}))):u.push(s.a.createElement("div",null,s.a.createElement("img",{className:"dislikedimage2"})))),a.push(s.a.createElement("div",{className:"icanswipe"},u,s.a.createElement(N.a,Object.assign({onSwiping:function(t){return e.swiped(t,r)}},m),s.a.createElement("button",{onMouseEnter:function(){return e.setState({showThumbs:r})},onMouseLeave:function(){return e.setState({showThumbs:""})},className:c,style:{transform:e.transformfunc(r),opacity:e.transparfunc(r)}},s.a.createElement("div",{className:"rowbutton"},s.a.createElement("div",{className:"columbuttonimage"},s.a.createElement("img",{className:"FoodPhoto",align:"left",src:o,alt:"Food"})),s.a.createElement("div",{className:"columtitle"},s.a.createElement("div",{className:"foodtitle2"}," ",s.a.createElement("b",{className:"FoodTitle"},r)," ",s.a.createElement("br",null)," "),s.a.createElement("div",{className:"foodtags2"},s.a.createElement("div",{className:"badgesContainer"},l))),s.a.createElement("div",{className:"informationbuttonscolum"},s.a.createElement("div",{className:"informationbutton1",onClick:function(){e.logAction("get recipe",r),e.sendRecipe(r)}},e.recipePopup(r,e.getimage(n))),s.a.createElement("div",{className:"informationbutton2",onClick:function(){e.logAction("get nutritional values",r),e.sendNuttritionSimilar(r)}},e.nutritionalPopup(r))))))))},i=0;i<t.length;i++)n(i);return a}}},{key:"generateBadges",value:function(e){var t=[],a=this.getAssets();return void 0!=a&&a.length>0&&void 0!=a[e]&&a[e].forEach((function(e,a){var n="FoodBadge "+e;"15-minutes-or-less"===e&&(n="FoodBadge fifteen-minutes-or-less"),t.push(s.a.createElement(I.a,{position:"bottom center",content:s.a.createElement("h5",null,e),trigger:s.a.createElement("button",{className:n}," ")}))})),t}},{key:"generateMeal",value:function(){var e=this;if(void 0!==this.state.foods){for(var t=this.state.foods,a=this.getAssets(),n=[],i=function(i){var r=C(t[i]),o=[];void 0!=a&&a.length>0&&void 0!=a[i]&&a[i].forEach((function(e,t){var a="FoodBadge "+e;"15-minutes-or-less"===e&&(a="FoodBadge fifteen-minutes-or-less"),o.push(s.a.createElement(I.a,{position:"bottom center",content:s.a.createElement("h5",null,e),trigger:s.a.createElement("button",{className:a}," ")}))}));var l="FoodItem fadeInLeft"+i,c={onSwiped:function(){return e.endSwipe()},onSwipedRight:function(){return e.like(r)},onSwipedLeft:function(){return e.dislike(r)},display:"flex",preventDefaultTouchmoveEvent:!0,trackMouse:!0,transition:"transform 1s ease",delta:10},m=[];e.state.showThumbs!=r&&void 0==e.state.translation||e.state.showThumbs!=r&&void 0==e.state.translation[r]||(Math.abs(e.state.shadownr)>10?e.state.shadownr>0?m.push(s.a.createElement("div",null,s.a.createElement("img",{className:"likedimage"}),s.a.createElement("img",{className:"dislikedimagewithshadow"}))):m.push(s.a.createElement("div",null,s.a.createElement("img",{className:"likedimagewithshadow"}),s.a.createElement("img",{className:"dislikedimage"}))):m.push(s.a.createElement("div",null,s.a.createElement("img",{className:"likedimage"}),s.a.createElement("img",{className:"dislikedimage"})))),n.push(s.a.createElement("div",{className:"icanswipe"},m,s.a.createElement(N.a,Object.assign({onSwiping:function(t){return e.swiped(t,r)}},c),s.a.createElement("button",{onMouseEnter:function(){return e.setState({showThumbs:r})},onMouseLeave:function(){return e.setState({showThumbs:""})},className:l,style:{transform:e.transformfunc(r),opacity:e.transparfunc(r)},onClick:function(){}},s.a.createElement("div",{className:"rowbutton"},s.a.createElement("div",{className:"columbuttonimage"},s.a.createElement("img",{className:"FoodPhoto",align:"left",src:e.getimage(i),alt:"Food"})),s.a.createElement("div",{className:"columtitle"},s.a.createElement("div",{className:"foodtitle2"}," ",s.a.createElement("b",{className:"FoodTitle"},r)," ",s.a.createElement("br",null)," "),s.a.createElement("div",{className:"foodtags2"},s.a.createElement("div",{className:"badgesContainer"},o))),s.a.createElement("div",{className:"informationbuttonscolum"},s.a.createElement("div",{className:"informationbutton1",onClick:function(){e.logAction("get recipe",r),e.sendRecipe(r)}},e.recipePopup(t[i],e.getimage(i))),s.a.createElement("div",{className:"informationbutton2",onClick:function(){e.logAction("get nutritional values",r),e.sendNuttritionSimilar(r)}},e.nutritionalPopup(t[i]))))))))},r=0;r<t.length;r++)i(r);return n}}},{key:"transformfunc",value:function(e){return void 0!=this.state.translation?this.state.translation[e]:""}},{key:"transparfunc",value:function(e){return void 0!=this.state.transparency?this.state.transparency[e]:1}},{key:"like",value:function(e){""===e&&(e=this.state.foods[this.state.foods.length-1]);for(var t=e.toLowerCase(),a=JSON.parse(localStorage.getItem("users")),n=a.length-1;n>=0;n--)if(a[n].Name===localStorage.getItem("currentUser")){for(var s=a[n].Liked,i=this.state.foods,r=this.state.tags,o=this.state.images,l=0,c=0;c<i.length;c++){if(void 0!=i[c])i[c].toLowerCase()===t&&(l=c)}if(void 0==s.length){var m=[];void 0!=s&&m.push(s),m.push(t),s=m}else s.push(t);i.splice(l,1),this.setState({foods:i}),r.splice(l,1),this.setState({tags:r}),o.splice(l,1),this.setState({images:o}),this.setState({likedItems:s}),a[n].Liked=s,localStorage.setItem("users",JSON.stringify(a)),this.logAction("like",e);break}}},{key:"unlike",value:function(e){for(var t=e.toLowerCase(),a=JSON.parse(localStorage.getItem("users")),n=a.length-1;n>=0;n--){if(a[n].Name===localStorage.getItem("currentUser")){for(var s=a[n].Liked,i=0,r=0;r<s.length;r++){if(void 0!=s[r])s[r].toLowerCase()===t&&(i=r)}void 0==s&&(s=[]),s.splice(i,1);var o=this.state.favorites;o.splice(i,1),this.setState({liked:s}),this.setState({favorites:o}),a[n].Liked=s,localStorage.setItem("users",JSON.stringify(a)),this.setState({likedItems:s}),this.logAction("unlike",e);break}this.setState({favorite:!0})}}},{key:"dislike",value:function(e){""===e&&(e=this.state.foods[this.state.foods.length-1]);for(var t=e.toLowerCase(),a=JSON.parse(localStorage.getItem("users")),n=a.length-1;n>=0;n--)if(a[n].Name===localStorage.getItem("currentUser")){for(var s=a[n].Disliked,i=this.state.foods,r=this.state.tags,o=this.state.images,l=0,c=0;c<i.length;c++){if(void 0!=i[c])i[c].toLowerCase()===t&&(localStorage.setItem("n","kked"),l=c)}i.splice(l,1),this.setState({foods:i}),r.splice(l,1),this.setState({tags:r}),o.splice(l,1),this.setState({images:o}),null==s&&(s=[]),s.push(t),this.setState({dislikedItems:s}),a[n].Disliked=s,localStorage.setItem("users",JSON.stringify(a)),this.logAction("dislike",t);break}}},{key:"logAction",value:function(e,t){for(var a=JSON.parse(localStorage.getItem("users")),n=a.length-1;n>=0;n--)if(a[n].Name===localStorage.getItem("currentUser")){t,e;var s=[];s.push(Date.now()),s.push(e);var i=0;i=0===JSON.parse(localStorage.getItem("viewInit"))?"list mode":"swipe mode",s.push(i),s.push(t),a[n].Log.push(s),localStorage.setItem("users",JSON.stringify(a));break}}},{key:"endSwipe",value:function(){this.setState({swiping:!1}),this.setState({shadownr:0});var e={};this.setState({translation:e,transparency:e})}},{key:"swiped",value:function(e,t){this.setState({swiping:!0}),this.setState({shadownr:e.deltaX});var a=-1*e.deltaX,n={};n[t]="translate("+a+"px,0%)";var s={};s[t]=10/Math.abs(e.deltaX),this.setState({translation:n,transparency:s})}},{key:"getname",value:function(e){return void 0!==this.state.foods?this.state.foods[e]:""}},{key:"getimage",value:function(e){return void 0!==this.state.images?this.state.images[e]:""}},{key:"render",value:function(){return this.state.favorite?s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("div",{className:"PageHeader"}," ",s.a.createElement("b",{className:"PageTitle"},"Favorites"),s.a.createElement(d.b,{to:"/profile"},s.a.createElement("button",{title:"profile",className:"profile"},s.a.createElement("b",null," "))),s.a.createElement("button",{className:"favorites",title:"favorites",onClick:this.goToFavorites},s.a.createElement("b",null)),s.a.createElement("button",{className:"toRecommendButton",title:"recommends",onClick:this.goToRecommends},s.a.createElement("b",null))),this.generateView())):(this.state.tutor,s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("div",{className:"PageHeader"}," ",s.a.createElement("b",{className:"PageTitle"},"Recommendations"),s.a.createElement(d.b,{to:"/profile"},s.a.createElement("button",{title:"profile",className:"profile"},s.a.createElement("b",null," "))),s.a.createElement("button",{className:"favorites",title:"favorites",onClick:this.goToFavorites},s.a.createElement("b",null)),s.a.createElement("button",{className:"toRecommendButton",title:"recommends",onClick:this.goToRecommends},s.a.createElement("b",null))),this.generateView())))}}]),t}(s.a.Component),R={position:"relative",width:"250px",height:"250px"},J={display:"flex",justifyContent:"space-between",marginTop:12},P=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).remove=function(){return a.setState((function(e){var t=e.cards;return{cards:t.slice(1,t.length)}}))},a.swipeItem=a.swipeItem.bind(Object(f.a)(a));var n=[],s=[];return null!=localStorage.getItem("likedItems")?n=JSON.parse(localStorage.getItem("likedItems")):localStorage.setItem("likedItems",JSON.stringify(n)),null!=localStorage.getItem("dislikedItems")?s=JSON.parse(localStorage.getItem("dislikedItems")):localStorage.setItem("dislikedItems",JSON.stringify(s)),a.state={cards:["little kick  jalapeno burgers","hot tamale  burgers","hot tamale  burgers"],likedItems:n,dislikedItems:s},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"swipeItem",value:function(e){var t=this.state.cards[0],a=JSON.parse(localStorage.getItem("likedItems")),n=JSON.parse(localStorage.getItem("dislikedItems"));if("left"===e){var s=a.indexOf(t);s>=0&&a.splice(s,1),n.includes(t)||n.push(t)}else if("right"===e){var i=n.indexOf(t);i>=0&&n.splice(i,1),a.includes(t)||a.push(t)}this.state.likedItems=a,this.state.dislikedItems=n,localStorage.setItem("likedItems",JSON.stringify(this.state.likedItems)),localStorage.setItem("dislikedItems",JSON.stringify(this.state.dislikedItems))}},{key:"render",value:function(){var e=this.state.cards;return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("div",{className:"PageHeader"}," ",s.a.createElement("b",{className:"PageTitle"},"Recommendations")),s.a.createElement("div",{style:R},e.length>0?s.a.createElement("div",{style:R},s.a.createElement(E.a,{buttons:function(e){var t=e.left,a=e.right;return s.a.createElement("div",{style:J},s.a.createElement("button",{className:"tinderButton dislike",onClick:t},s.a.createElement("b",null,"Reject")),s.a.createElement("button",{className:"tinderButton like",onClick:a},s.a.createElement("b",null,"Accept")))},onAfterSwipe:this.remove,onSwipe:this.swipeItem},s.a.createElement("div",{className:"FoodCard"},s.a.createElement("div",{className:"FoodHeader"},s.a.createElement("b",null,e[0])),s.a.createElement("p",null,"Recipe goes here.")))):s.a.createElement("div",{className:"FoodItem",zIndex:-2},"No more cards"))))}}]),t}(n.Component),B=function(e){function t(){var e;if(Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).handleChange=function(t){e.setState({name:t.target.value})},null===localStorage.getItem("users")){localStorage.setItem("users",JSON.stringify([]))}return e.state={name:""},e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"updateUsers",value:function(){for(var e=JSON.parse(localStorage.getItem("users")),t=!1,a=0;a<e.length;a++)if(e[a].Name===this.state.name){t=!0;break}if(!t){var n={Name:this.state.name,Preferences:["vegan","vegetarian","gluten-free"],Allergies:["nuts","lactose","seafood"],Log:[],Liked:[],Disliked:[],FirstTime:!0,FirstTime1:!0,FirstTime2:!0,FirstTime3:!0,booleansPreferences:[!1,!1,!1],booleanAllergies:[!1,!1,!1]};e.push(n),localStorage.setItem("users",JSON.stringify(e))}localStorage.setItem("currentUser",this.state.name)}},{key:"handleTest",value:function(e){if(void 0==localStorage.getItem("viewInit")&&localStorage.setItem("viewInit","1"),e.ctrlKey&&13==e.charCode)localStorage.setItem("viewInit",(JSON.parse(localStorage.getItem("viewInit"))+1)%2);else if(13==e.charCode){for(var t=JSON.parse(localStorage.getItem("users")),a=t[0].Log,n="",s="",i=0;i<t.length;i++){a=t[i].Log,s+=t[i].Name,i!=t.length-1&&(s+=", ");for(var r=0;r<a.length;r++)n+=a[r],r!=a.length-1&&(n+=", ");i!=t.length-1&&(n+="; ")}localStorage.setItem("logForUser",n),localStorage.setItem("usersString",s)}}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("div",{className:"DarkBackground"},s.a.createElement("div",null,s.a.createElement("h4",{className:"fadeInLeft0"},"Hello there! Thank you for wanting to participate in our test."),s.a.createElement("h4",{className:"fadeInLeft1"}," Before we start, can we please get your name?"),s.a.createElement("input",{type:"text",name:"username",className:"textBox fadeInLeft2",placeholder:"Your name",value:this.state.username,onChange:this.handleChange,onKeyPress:this.handleTest})),s.a.createElement(d.b,{to:"/home"},s.a.createElement("button",{className:"NextButton White fadeInLeft3",onClick:function(){e.updateUsers()}},s.a.createElement("b",null,"NEXT"))))))}}]),t}(s.a.Component);function A(){var e=Object(v.a)(["\n  display: flex;\n  transition: ",";\n  transform: ",";\n"]);return A=function(){return e},e}y.a.div(A(),(function(e){return e.sliding?"none":"transform 1s ease"}),(function(e){return e.sliding?"PREV"===e.dir?"translateX(calc(2 * (-80% - 20px)))":"translateX(0%)":"translateX(calc(-80% - 20px))"}));var D={position:"relative",width:"250px",height:"300px"},U={display:"flex",justifyContent:"space-between",marginTop:12};function M(e){var t=e;try{t=e[0].toUpperCase()+e.slice(1)}catch(a){}return t}function z(e){var t,a;return e<50?(t=255,a=Math.round(5.1*e)):(a=255,t=Math.round(510-5.1*e)),"#"+("000000"+(65536*t+256*a+0).toString(16)).slice(-6)}s.a.Component;var H=function(e){function t(e,a){var n;return Object(o.a)(this,t),(n=Object(c.a)(this,Object(m.a)(t).call(this,e,a))).stackEl=s.a.createRef(),n.state={stack:null,foods:["Turkey","Ham","Pineapple","Test","Seeds"]},n.createCards=n.createCards.bind(Object(f.a)(n)),n}return Object(u.a)(t,e),Object(l.a)(t,[{key:"createCards",value:function(){for(var e=[],t=0;t<this.state.foods.length;t++){var a="card"+t;e.push(s.a.createElement("div",{className:"card clubs",ref:a},s.a.createElement("div",{className:"FoodHeader"},s.a.createElement("b",null,this.state.foods[t]))))}return e}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{id:"viewport"},s.a.createElement("div",{className:"dislikeStack"},s.a.createElement("b",null,"Dislike")),s.a.createElement("div",{className:"likeStack"},s.a.createElement("b",null,"Like")),s.a.createElement(T.a,{className:"stack",tagName:"div",setStack:function(t){return e.setState({stack:t})},ref:this.stackEl},this.createCards())))}}]),t}(n.Component);function V(){var e=Object(v.a)(["\n  display: flex;\n  transition: ",";\n  transform: ",";\n"]);return V=function(){return e},e}y.a.div(V(),(function(e){return e.sliding?"none":"transform 1s ease"}),(function(e){return e.sliding?"PREV"===e.dir?"translateX(calc(2 * (-80% - 20px)))":"translateX(0%)":"translateX(calc(-80% - 20px))"}));function X(e){var t=e;try{t=e[0].toUpperCase()+e.slice(1)}catch(a){}return t}function q(e){var t,a;return e<50?(t=255,a=Math.round(5.1*e)):(a=255,t=Math.round(510-5.1*e)),"#"+("000000"+(65536*t+256*a+0).toString(16)).slice(-6)}var Y=function(e){return new Promise((function(t){return setTimeout(t,e)}))},W=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).state={foods:[],tags:[],images:[],recipe:[],nutrition:[],ingredients:[],similar:[]},e.socket=e.initialiseSocket(),e.sendable=!1,e.generateMeal=e.generateMeal.bind(Object(f.a)(e)),e.getRecommendations=e.getRecommendations.bind(Object(f.a)(e)),e.switchViews=e.switchViews.bind(Object(f.a)(e)),e.generateView=e.generateView.bind(Object(f.a)(e)),e.resetSwipes=e.resetSwipes.bind(Object(f.a)(e)),e.generateFavorites=e.generateFavorites.bind(Object(f.a)(e)),e.goToFavorites=e.goToFavorites.bind(Object(f.a)(e)),e.goToRecommends=e.goToRecommends.bind(Object(f.a)(e)),e.generateBadges=e.generateBadges.bind(Object(f.a)(e)),e.swipeItem=e.swipeItem.bind(Object(f.a)(e)),e.saveAlert=e.saveAlert.bind(Object(f.a)(e)),e.createCards=e.createCards.bind(Object(f.a)(e)),e.socket.onopen=function(){for(var t=JSON.parse(localStorage.getItem("users")),a={action:"initialise"},n=t.length-1;n>=0;n--){if(t[n].Name===localStorage.getItem("currentUser"))t[n].FirstTime1=!1,localStorage.setItem("users",JSON.stringify(t)),a={action:"initialise",favorites:t[n].Liked,name:localStorage.getItem("currentUser")}}e.socket.send(JSON.stringify(a)),e.sendable||(e.loading=!1,e.sendable=!0,e.state.favorite?e.goToFavorites():e.getRecommendations())},e.state.favorite=JSON.parse(localStorage.getItem("favorite")),e.socket.onmessage=function(t){var a=JSON.parse(t.data);switch(console.log(a),a.action){case"Recommends":e.loading&&(e.loading=!1,w.a.fire({title:"Finished!",showConfirmButton:!1,timer:1e3})),w.a.fire({title:"Great!",text:"Now let's choose some meals you like or dislike, so we can get a small glimpse into your preferences.",icon:"success",confirmButtonText:"Okay!"}).then((function(){S.clickConfirm&&w.a.fire({text:" Drag an item left to dislike it, or right to like it.",icon:"info",confirmButtonText:"Okay!"}).then((function(){S.clickConfirm&&w.a.fire({text:" If you're ready, press the button down bellow for some personalized recommendations!",icon:"info",confirmButtonText:"Okay!"})}))}));var n=a.recommends,s=a.tags,i=a.images,r=e.filterfoods(n,s,i),o=r[0],l=r[1],c=r[2];e.setState({tags:l}),e.setState({foods:o}),e.setState({images:c}),1==JSON.parse(localStorage.getItem("viewInit"))&&1!=e.state.initialised&&(e.state.view=0,Y(5).then((function(){if(e.state.view=JSON.parse(localStorage.getItem("viewInit")),1==e.state.view){e.state.swipednumber=0;var t=(e.state.view+1)%2;localStorage.setItem("view",t),e.state.initialised=!0,e.setState({view:1})}})));break;case"favorites":e.loading&&(e.loading=!1,w.a.fire({title:"Finished!",showConfirmButton:!1,timer:1e3})),e.setState({favorites:a.favorites});break;case"Similar":e.loading=!1,w.a.fire({title:"Finished!",showConfirmButton:!1,timer:1e3}),e.setState({similar:a.similar});break;case"Recipe":e.setState({recipe:a.recipe});break;case"Nutrition":e.setState({nutrition:a.nutrition});break;case"Ingredients":e.setState({ingredients:a.ingredients})}},void 0===e.state.swipednumber&&(e.state.swipednumber=0),e.state.favorite&&e.goToFavorites(),void 0!=e.state.initialised&&0!=e.state.initialised||(e.state.view=0),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"filterfoods",value:function(e,t,a){for(var n=function(e,t,a){for(var n,s,i=e.length;0!==i;)s=Math.floor(Math.random()*i),n=e[i-=1],e[i]=e[s],e[s]=n,n=t[i],t[i]=t[s],t[s]=n,n=a[i],a[i]=a[s],a[s]=n;var r=[];return r.push(e,t,a),r}(e,t,a),s=n[0],i=n[1],r=n[2],o=null,l=null,c=JSON.parse(localStorage.getItem("users")),m=c.length-1;m>=0;m--)c[m].Name===localStorage.getItem("currentUser")&&(o=c[m].Liked,l=c[m].Disliked);null==o&&(o=[]),null==l&&(l=[]);for(var u=[],d=[],g=[],h=0,p=0;h<7;p++)""===s[p]||o.includes(s[p])||l.includes(s[p])||(h++,u.push(s[p]),d.push(i[p]),g.push(r[p]));var f=[];return f.push(u,d,g),f}},{key:"initialiseSocket",value:function(){return void 0!==this.socket?this.socket:(this.setState({favorite:!1}),new WebSocket("ws://localhost:9000"))}},{key:"getInfo",value:function(e){this.sendRecipe(e),this.sendNuttritionSimilar(e)}},{key:"sendRecipe",value:function(e){e=e.toLowerCase(),console.log("send recipe"),this.socket=this.initialiseSocket();var t={action:"Recipe",recipe:e},a={action:"Ingredients",name:e};void 0!==this.sendable&&this.sendable&&(this.socket.send(JSON.stringify(t)),this.socket.send(JSON.stringify(a)))}},{key:"sendNuttritionSimilar",value:function(e){e=e.toLowerCase(),this.socket=this.initialiseSocket();var t={action:"Nutrition",name:e};void 0!==this.sendable&&this.sendable&&this.socket.send(JSON.stringify(t));for(var a={action:"Similar",recipe:e,prolist:[]},n=JSON.parse(localStorage.getItem("users")),s=null,i=null,r=n.length-1;r>=0;r--)n[r].Name===localStorage.getItem("currentUser")&&(s=n[r].Liked,i=n[r].Disliked);null==s&&(s=[]),null==i&&(i=[]);for(var o=[],l=0;l<s.length;l++)if(s[l]!=e){var c={};c.name=s[l],c.rating=1,o.push(c)}for(var m=0;m<i.length;m++){var u={};u.name=i[m],u.rating=-1,o.push(u)}a.prolist=o,this.state.proto=!this.state.proto,this.sendable&&this.state.proto&&(this.socket.send(JSON.stringify(a)),w.a.fire({title:"Loading...",text:"Please wait",showConfirmButton:!1,allowOutsideClick:!1}))}},{key:"getFavorites",value:function(){for(var e=JSON.parse(localStorage.getItem("users")),t=null,a=e.length-1;a>=0;a--)e[a].Name===localStorage.getItem("currentUser")&&(t=e[a].Liked);null==t&&(t=[]);for(var n={action:"Favorites",prolist:[{name:"hot tamale  burgers",rating:.5}]},s=(JSON.parse(localStorage.getItem("boxes")),[]),i=0;i<t.length;i++){var r={};r.name=t[i],r.rating=1,s.push(r)}n.prolist=s,console.log(s),console.log(n),this.sendable&&(this.socket.send(JSON.stringify(n)),w.a.fire({title:"Loading...",text:"Please wait",showConfirmButton:!1,allowOutsideClick:!1}),this.loading=!0)}},{key:"getRecommendations",value:function(){for(var e=JSON.parse(localStorage.getItem("users")),t=-1,a=null,n=null,s=e.length-1;s>=0;s--)e[s].Name===localStorage.getItem("currentUser")&&(t=s,a=e[s].Liked,n=e[s].Disliked);null==a&&(a=[]),null==n&&(n=[]);var i={action:"Recommend",account:{vegan:1,easy:1,preparation:1},amount:7,prolist:[{name:"hot tamale  burgers",rating:.5}]},r=7;null!=a&&void 0!==a&&(r+=a.length),null!=n&&void 0!==n&&(r+=n.length),i.amount=r;for(var o=e[t].Preferences,l=e[t].booleansPreferences,c=0;c<o.length;c++)o[c]=o[c].toLowerCase();for(var m={},u=0;u<o.length;u++)!0===l[u]&&(m[o[u]]=1);console.log(m),i.account=m,console.log(i);for(var d=[],g=0;g<a.length;g++){var h={};h.name=a[g],h.rating=1,d.push(h)}for(var p=0;p<n.length;p++){var f={};f.name=n[p],f.rating=-1,d.push(f)}i.prolist=d,console.log(d),i.account=m,console.log(i),console.log(i),this.sendable&&(this.socket.send(JSON.stringify(i)),w.a.fire({title:"Loading...",text:"Please wait",showConfirmButton:!1,allowOutsideClick:!1}),this.state.initialised=!1,this.loading=!0)}},{key:"nutritionalPopup",value:function(e){var t=["Carbs","Total Fats","Sugar","Sodium","Protein","Saturated Fats","Carbohydrates"],a=this.getNutritionInfo(e),n=[],i=[],r=[],o=[],l=this.getExplanation(),c=X(e);if(void 0!==a)for(var m=0;m<a.length;m++)i.push(s.a.createElement("div",{className:"popupText"},t[m],s.a.createElement("br",null))),r.push(s.a.createElement("div",{className:"popupText"},a[m],s.a.createElement("br",null)));var u=!0;if(void 0!==l)for(var d=0;d<l.length;d++){var g=Math.floor(100*l[d].matchfactor),h=q(g);g>=60&&(u=!1,o.push(s.a.createElement("div",{className:"popupText2"},s.a.createElement("div",{className:"container2"},s.a.createElement("img",{className:"FoodPhotoLarge3",onClick:this.goToFavorites,title:l[d].name,align:"left",src:l[d].image,alt:"Food"}),s.a.createElement("button",{className:"OnTopButton",style:{backgroundColor:h}},g,"%")),s.a.createElement("br",null))))}return u?n.push(s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"Nutritioncolumn"},s.a.createElement("div",{className:"popupTextTitle"},"Nutritional info:",s.a.createElement("br",null)),s.a.createElement("div",{className:"textrow"},s.a.createElement("div",{className:"textcolumn1"},i),s.a.createElement("div",{className:"textcolumn2"},r))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"popupTextTitle2"},"You did not try anything like this! Try it out!",s.a.createElement("br",null))))):n.push(s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"Nutritioncolumn"},s.a.createElement("div",{className:"popupTextTitle"},"Nutritional info:",s.a.createElement("br",null)),s.a.createElement("div",{className:"textrow"},s.a.createElement("div",{className:"textcolumn1"},i),s.a.createElement("div",{className:"textcolumn2"},r))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"popupTextTitle2"},"Because you liked:",s.a.createElement("br",null)),o))),[s.a.createElement(b.a,{modal:!0,trigger:s.a.createElement("button",{title:"nutrition",className:"IconLayout NutritionIcon"})},s.a.createElement("div",{className:"popUp2"},s.a.createElement("div",{className:"popupHeader"},"Nutritional info for",s.a.createElement("br",null),c),s.a.createElement("br",null),n))]}},{key:"recipePopup",value:function(e,t){var a=this,n=this.getRecipe(),i=[],r=this.getIngredients(),o=[],l=[],c=X(e);if(void 0!==r)for(var m=0;m<r.length;m++)l.push(s.a.createElement("div",{className:"popupText"},r[m],s.a.createElement("br",null)));if(void 0!==n)for(var u=0;u<n.length;u++)i.push(s.a.createElement("div",{className:"popupRecipeText"},u+1,". ",n[u],s.a.createElement("br",null)));o.push(s.a.createElement("div",{className:"row:after"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"rowingredi"},s.a.createElement("div",{className:"popupTextTitle"},"Ingredients:",s.a.createElement("br",null)),l),s.a.createElement("div",{className:"row2"},s.a.createElement("img",{className:"FoodPhotoLarge",align:"left",src:t,alt:"Food"}))),s.a.createElement("div",{className:"column2"},s.a.createElement("div",{className:"reciperow"},s.a.createElement("div",{className:"popupTextTitleRecipe"},"Steps:",s.a.createElement("br",null)),i))));var d=[];return d.push(s.a.createElement(b.a,{className:"poptry",modal:!0,trigger:s.a.createElement("button",{title:"recipe",className:"IconLayout RecipeIcon",onClick:function(){return a.sendRecipe(e)}}),position:"right center"},s.a.createElement("div",{className:"popUp2"},s.a.createElement("div",{className:"popupHeader"},"Recipe for",s.a.createElement("br",null),c),s.a.createElement("br",null),o))),d}},{key:"recipePopupForTinder",value:function(e,t){var a,n=this,i=this.getRecipe(),r=[],o=this.getIngredients(),l=[],c=[],m=X(e);if(void 0!==o)for(var u=0;u<o.length;u++)c.push(s.a.createElement("div",{className:"popupText"},o[u],s.a.createElement("br",null)));if(void 0!==i)for(var d=0;d<i.length;d++)r.push(s.a.createElement("div",{className:"popupRecipeText"},d+1,". ",i[d],s.a.createElement("br",null)));l.push(s.a.createElement("div",{className:"row:after"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"rowingredi"},s.a.createElement("div",{className:"popupTextTitle"},"Ingredients:",s.a.createElement("br",null)),c),s.a.createElement("div",{className:"row2"},s.a.createElement("img",{className:"FoodPhotoLarge3",onClick:function(){return n.setState({open:!1})},align:"left",src:t,alt:"Food"}))),s.a.createElement("div",{className:"column2"},s.a.createElement("div",{className:"reciperow"},s.a.createElement("div",{className:"popupTextTitleRecipe"},"Steps:",s.a.createElement("br",null)),r))));var g=[];return g.push(s.a.createElement("div",null,s.a.createElement("button",(a={title:"recipe",className:"RecipeButton"},Object(p.a)(a,"title","recipe"),Object(p.a)(a,"align","left"),Object(p.a)(a,"onClick",(function(){n.sendRecipe(e),n.setState({opened:e}),n.logAction("get recipe",e)})),Object(p.a)(a,"src",t),a)),s.a.createElement(b.a,{open:this.state.opened==e,onClick:function(){return n.setState({opened:"none"})},closeOnDocumentClick:!0,position:"right center"},s.a.createElement("div",{className:"popUp3",onClick:function(){n.setState({opened:"none"}),n.logAction("get recipe",e)}},s.a.createElement("div",{className:"popupHeader",onClick:function(){return n.setState({opened:"none"})}},"Recipe for",s.a.createElement("br",null),m),s.a.createElement("br",null),l)))),g}},{key:"recipePopupFromImage",value:function(e,t){var a=this,n=this.getRecipe(),i=[],r=this.getIngredients(),o=[],l=[],c=X(e);if(void 0!==r)for(var m=0;m<r.length;m++)l.push(s.a.createElement("div",{className:"popupText"},r[m],s.a.createElement("br",null)));if(void 0!==n)for(var u=0;u<n.length;u++)i.push(s.a.createElement("div",{className:"popupRecipeText"},u+1,". ",n[u],s.a.createElement("br",null)));o.push(s.a.createElement("div",{className:"row:after"},s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"rowingredi"},s.a.createElement("div",{className:"popupTextTitle"},"Ingredients:",s.a.createElement("br",null)),l),s.a.createElement("div",{className:"row2"},s.a.createElement("img",{className:"FoodPhotoLarge3",onClick:function(){return a.setState({open:!1})},align:"left",src:t,alt:"Food"}))),s.a.createElement("div",{className:"column2"},s.a.createElement("div",{className:"reciperow"},s.a.createElement("div",{className:"popupTextTitleRecipe"},"Steps:",s.a.createElement("br",null)),i))));var d=[];return d.push(s.a.createElement("div",null,s.a.createElement("img",{className:"FoodPhotoTinder",title:"recipe",align:"left",onClick:function(){a.sendRecipe(e),a.setState({open:!0})},src:t}),s.a.createElement(b.a,{open:!1,onClick:function(){return a.setState({open:!1})},closeOnDocumentClick:!0,position:"right center"},s.a.createElement("div",{className:"popUp3",onClick:function(){return a.setState({open:!1})}},s.a.createElement("div",{className:"popupHeader",onClick:function(){return a.setState({open:!1})}},"Recipe for",s.a.createElement("br",null),c),s.a.createElement("br",null),o)))),d}},{key:"nutritionalPopupForTinder",value:function(e,t){var a,n=this,i=["Carbs","Total Fats","Sugar","Sodium","Protein","Saturated Fats","Carbohydrates"],r=this.getNutritionInfo(e),o=[],l=[],c=[],m=[],u=this.getExplanation(),d=X(e);if(void 0!==r)for(var g=0;g<r.length;g++)l.push(s.a.createElement("div",{className:"popupText"},i[g],s.a.createElement("br",null))),c.push(s.a.createElement("div",{className:"popupText"},r[g],s.a.createElement("br",null)));var h=!0;if(void 0!==u)for(var f=0;f<u.length;f++){var v=Math.floor(100*u[f].matchfactor),k=q(v);v>=60&&(h=!1,m.push(s.a.createElement("div",{className:"popupText2"},s.a.createElement("div",{className:"container2"},s.a.createElement("img",{className:"FoodPhotoLarge3",onClick:this.goToFavorites,title:u[f].name,align:"left",src:u[f].image,alt:"Food"}),s.a.createElement("button",{className:"OnTopButton",style:{backgroundColor:k}},v,"%")),s.a.createElement("br",null))))}h?o.push(s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"Nutritioncolumn"},s.a.createElement("div",{className:"popupTextTitle"},"Nutritional info:",s.a.createElement("br",null)),s.a.createElement("div",{className:"textrow"},s.a.createElement("div",{className:"textcolumn1"},l),s.a.createElement("div",{className:"textcolumn2"},c))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"popupTextTitle2"},"You did not try anything like this! Try it out!",s.a.createElement("br",null))))):o.push(s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"Nutritioncolumn"},s.a.createElement("div",{className:"popupTextTitle"},"Nutritional info:",s.a.createElement("br",null)),s.a.createElement("div",{className:"textrow"},s.a.createElement("div",{className:"textcolumn1"},l),s.a.createElement("div",{className:"textcolumn2"},c))),s.a.createElement("div",{className:"column"},s.a.createElement("div",{className:"popupTextTitle2"},"Because you liked:",s.a.createElement("br",null)),m)));var E=[];return E.push(s.a.createElement("div",null,s.a.createElement("button",(a={title:"recipe",className:"NutritionButton"},Object(p.a)(a,"title","Nutrition"),Object(p.a)(a,"align","left"),Object(p.a)(a,"onClick",(function(){n.sendNuttritionSimilar(e),n.setState({nutritionopened:e}),n.logAction("get nutritional values",e)})),Object(p.a)(a,"src",t),a)),s.a.createElement(b.a,{open:this.state.nutritionopened==e,onClick:function(){return n.setState({nutritionopened:"none"})},closeOnDocumentClick:!0,position:"right center"},s.a.createElement("div",{className:"popUp3",onClick:function(){return n.setState({nutritionopened:"none"})}},s.a.createElement("div",{className:"popupHeader",onClick:function(){n.setState({nutritionopened:"none"}),n.logAction("get nutritional values",e)}},"Recipe for",s.a.createElement("br",null),d),s.a.createElement("br",null),o)))),E}},{key:"getIngredients",value:function(e){return this.state.ingredients}},{key:"getRecipe",value:function(e){return this.state.recipe}},{key:"getNutritionInfo",value:function(e){return this.state.nutrition}},{key:"getExplanation",value:function(){return this.state.similar}},{key:"getAssets",value:function(){return this.state.tags}},{key:"saveAlert",value:function(){w.a.fire({title:"Saved!",text:"Your liked and disliked meals are saved.",icon:"success",confirmButtonText:"Great!"}),this.getRecommendations()}},{key:"swipeItem",value:function(e){var t=this.state.foods[this.state.swipednumber];"left"===e?this.dislike(t):"right"===e&&this.like(t)}},{key:"resetSwipes",value:function(){this.state.swipednumber=0,this.getRecommendations(),this.setState({view:1}),this.setState({favorite:!1}),localStorage.setItem("view",1)}},{key:"switchViews",value:function(){this.state.swipednumber=0;var e=(this.state.view+1)%2;localStorage.setItem("viewInit",e),this.setState({view:e}),this.setState({favorite:!1}),localStorage.setItem("view",e)}},{key:"goToFavorites",value:function(){this.getFavorites(),localStorage.setItem("favorite",JSON.stringify(!0)),this.setState({favorite:!0})}},{key:"goToRecommends",value:function(){this.getRecommendations(),localStorage.setItem("favorite",JSON.stringify(!1)),this.setState({favorite:!1})}},{key:"createCards",value:function(){for(var e=[],t=0;t<this.state.foods.length;t++){var a="card"+t;e.push(s.a.createElement("div",{className:"card",ref:a},s.a.createElement("div",{className:"FoodHeader"},s.a.createElement("b",null,X(this.state.foods[t]))),this.recipePopupFromImage(this.getname(t),this.getimage(t)),this.generateBadges(t),s.a.createElement("div",{className:"tablerow3"},this.recipePopupForTinder(this.state.foods[t],this.getimage(t)),this.nutritionalPopupForTinder(this.state.foods[t]))))}return e}},{key:"generateView",value:function(){var e=this;return this.state.favorite?s.a.createElement("div",null,s.a.createElement("div",{className:"Listing"},"favoritestate",this.generateFavorites())):0===this.state.view?s.a.createElement("div",null,s.a.createElement("div",{className:"Listing"},this.generateMeal()),s.a.createElement("div",{className:"buttons"},s.a.createElement("br",null),s.a.createElement(d.b,{to:"/recommendations"},s.a.createElement("button",{className:"NextButton Green"},s.a.createElement("b",null,"Recommend!"))))):s.a.createElement("div",null,s.a.createElement("div",{id:"viewport"},s.a.createElement("div",{className:"dislikeStack"},s.a.createElement("b",null,"Dislike")),s.a.createElement("div",{className:"likeStack"},s.a.createElement("b",null,"Like")),s.a.createElement(T.a,{className:"stack",tagName:"div",setStack:function(t){return e.setState({stack:t})},ref:this.stackEl,throwoutleft:function(){return e.dislike("")},throwoutright:function(){return e.like("")}},this.createCards())),s.a.createElement("div",{className:"buttons"},s.a.createElement("br",null),s.a.createElement(d.b,{to:"/recommendations"},s.a.createElement("button",{className:"NextButton Green"},s.a.createElement("b",null,"Recommend!")))))}},{key:"generateFavorites",value:function(){var e=this,t=this.state.favorites;if(null!=t&&void 0!=t){for(var a=[],n=function(n){var i=t[n],r=i.name,o=i.image,l=[];void 0==i.tags||(i.tags.length<=1?l.push(s.a.createElement("button",{className:"FoodBadge "+i.tags}," ")):i.tags.forEach((function(e,t){var a="FoodBadge "+e;"15-minutes-or-less"===e&&(a="FoodBadge fifteen-minutes-or-less"),l.push(s.a.createElement("button",{className:a}," "))})));var c="FoodItem fadeInLeft"+n,m={onSwiped:function(){return e.endSwipe()},onSwipedLeft:function(){return e.unlike(r)},display:"flex",preventDefaultTouchmoveEvent:!0,trackMouse:!0,transition:"transform 1s ease",delta:10},u=[];e.state.showThumbs!=r&&void 0==e.state.translation||e.state.showThumbs!=r&&void 0==e.state.translation[r]||(Math.abs(e.state.shadownr)>10&&e.state.shadownr>0?u.push(s.a.createElement("div",null,s.a.createElement("img",{className:"dislikedimagewithshadow2"}))):u.push(s.a.createElement("div",null,s.a.createElement("img",{className:"dislikedimage2"})))),a.push(s.a.createElement("div",{className:"icanswipe"},u,s.a.createElement(N.a,Object.assign({onSwiping:function(t){return e.swiped(t,r)}},m),s.a.createElement("button",{onMouseEnter:function(){return e.setState({showThumbs:r})},onMouseLeave:function(){return e.setState({showThumbs:""})},className:c,style:{transform:e.transformfunc(r),opacity:e.transparfunc(r)}},s.a.createElement("div",{className:"rowbutton"},s.a.createElement("div",{className:"columbuttonimage"},s.a.createElement("img",{className:"FoodPhoto",align:"left",src:o,alt:"Food"})),s.a.createElement("div",{className:"columtitle"},s.a.createElement("div",{className:"foodtitle2"}," ",s.a.createElement("b",{className:"FoodTitle"},r)," ",s.a.createElement("br",null)," "),s.a.createElement("div",{className:"foodtags2"},s.a.createElement("div",{className:"badgesContainer"},l))),s.a.createElement("div",{className:"informationbuttonscolum"},s.a.createElement("div",{className:"informationbutton1",onClick:function(){e.logAction("get recipe",r),e.sendRecipe(r)}},e.recipePopup(r,e.getimage(n))),s.a.createElement("div",{className:"informationbutton2",onClick:function(){e.logAction("get nutritional values",r),e.sendNuttritionSimilar(r)}},e.nutritionalPopup(r))))))))},i=0;i<t.length;i++)n(i);return a}}},{key:"generateBadges",value:function(e){var t=[],a=this.getAssets();return void 0!=a&&a.length>0&&void 0!=a[e]&&a[e].forEach((function(e,a){var n="FoodBadge "+e;"15-minutes-or-less"===e&&(n="FoodBadge fifteen-minutes-or-less"),t.push(s.a.createElement(I.a,{position:"bottom center",content:s.a.createElement("h5",null,e),trigger:s.a.createElement("button",{className:n}," ")}))})),t}},{key:"generateMeal",value:function(){var e=this;if(void 0!==this.state.foods){for(var t=this.state.foods,a=this.getAssets(),n=[],i=function(i){var r=X(t[i]),o=[];void 0!=a&&a.length>0&&void 0!=a[i]&&a[i].forEach((function(e,t){var a="FoodBadge "+e;"15-minutes-or-less"===e&&(a="FoodBadge fifteen-minutes-or-less"),o.push(s.a.createElement(I.a,{position:"bottom center",content:s.a.createElement("h5",null,e),trigger:s.a.createElement("button",{className:a}," ")}))}));var l="FoodItem fadeInLeft"+i,c={onSwiped:function(){return e.endSwipe()},onSwipedRight:function(){return e.like(r)},onSwipedLeft:function(){return e.dislike(r)},display:"flex",preventDefaultTouchmoveEvent:!0,trackMouse:!0,transition:"transform 1s ease",delta:10},m=[];e.state.showThumbs!=r&&void 0==e.state.translation||e.state.showThumbs!=r&&void 0==e.state.translation[r]||(Math.abs(e.state.shadownr)>10?e.state.shadownr>0?m.push(s.a.createElement("div",null,s.a.createElement("img",{className:"likedimage"}),s.a.createElement("img",{className:"dislikedimagewithshadow"}))):m.push(s.a.createElement("div",null,s.a.createElement("img",{className:"likedimagewithshadow"}),s.a.createElement("img",{className:"dislikedimage"}))):m.push(s.a.createElement("div",null,s.a.createElement("img",{className:"likedimage"}),s.a.createElement("img",{className:"dislikedimage"})))),n.push(s.a.createElement("div",{className:"icanswipe"},m,s.a.createElement(N.a,Object.assign({onSwiping:function(t){return e.swiped(t,r)}},c),s.a.createElement("button",{onMouseEnter:function(){return e.setState({showThumbs:r})},onMouseLeave:function(){return e.setState({showThumbs:""})},className:l,style:{transform:e.transformfunc(r),opacity:e.transparfunc(r)},onClick:function(){}},s.a.createElement("div",{className:"rowbutton"},s.a.createElement("div",{className:"columbuttonimage"},s.a.createElement("img",{className:"FoodPhoto",align:"left",src:e.getimage(i),alt:"Food"})),s.a.createElement("div",{className:"columtitle"},s.a.createElement("div",{className:"foodtitle2"}," ",s.a.createElement("b",{className:"FoodTitle"},r)," ",s.a.createElement("br",null)," "),s.a.createElement("div",{className:"foodtags2"},s.a.createElement("div",{className:"badgesContainer"},o))),s.a.createElement("div",{className:"informationbuttonscolum"},s.a.createElement("div",{className:"informationbutton1",onClick:function(){e.logAction("get recipe",r),e.sendRecipe(r)}},e.recipePopup(t[i],e.getimage(i))),s.a.createElement("div",{className:"informationbutton2",onClick:function(){e.logAction("get nutritional values",r),e.sendNuttritionSimilar(r)}},e.nutritionalPopup(t[i]))))))))},r=0;r<t.length;r++)i(r);return n}}},{key:"transformfunc",value:function(e){return void 0!=this.state.translation?this.state.translation[e]:""}},{key:"transparfunc",value:function(e){return void 0!=this.state.transparency?this.state.transparency[e]:1}},{key:"like",value:function(e){""===e&&(e=this.state.foods[this.state.foods.length-1]);for(var t=e.toLowerCase(),a=JSON.parse(localStorage.getItem("users")),n=a.length-1;n>=0;n--)if(a[n].Name===localStorage.getItem("currentUser")){for(var s=a[n].Liked,i=this.state.foods,r=this.state.tags,o=this.state.images,l=0,c=0;c<i.length;c++){if(void 0!=i[c])i[c].toLowerCase()===t&&(l=c)}if(void 0==s.length){var m=[];void 0!=s&&m.push(s),m.push(t),s=m}else s.push(t);i.splice(l,1),this.setState({foods:i}),r.splice(l,1),this.setState({tags:r}),o.splice(l,1),this.setState({images:o}),this.setState({likedItems:s}),a[n].Liked=s,localStorage.setItem("users",JSON.stringify(a)),this.logAction("like",e);break}}},{key:"unlike",value:function(e){for(var t=e.toLowerCase(),a=JSON.parse(localStorage.getItem("users")),n=a.length-1;n>=0;n--){if(a[n].Name===localStorage.getItem("currentUser")){for(var s=a[n].Liked,i=0,r=0;r<s.length;r++){if(void 0!=s[r])s[r].toLowerCase()===t&&(i=r)}void 0==s&&(s=[]),s.splice(i,1);var o=this.state.favorites;o.splice(i,1),this.setState({liked:s}),this.setState({favorites:o}),a[n].Liked=s,localStorage.setItem("users",JSON.stringify(a)),this.setState({likedItems:s}),this.logAction("unlike",e);break}this.setState({favorite:!0})}}},{key:"dislike",value:function(e){""===e&&(e=this.state.foods[this.state.foods.length-1]);for(var t=e.toLowerCase(),a=JSON.parse(localStorage.getItem("users")),n=a.length-1;n>=0;n--)if(a[n].Name===localStorage.getItem("currentUser")){for(var s=a[n].Disliked,i=this.state.foods,r=this.state.tags,o=this.state.images,l=0,c=0;c<i.length;c++){if(void 0!=i[c])i[c].toLowerCase()===t&&(l=c)}i.splice(l,1),this.setState({foods:i}),r.splice(l,1),this.setState({tags:r}),o.splice(l,1),this.setState({images:o}),null==s&&(s=[]),s.push(e),this.setState({dislikedItems:s}),a[n].Disliked=s,localStorage.setItem("users",JSON.stringify(a)),this.logAction("dislike",e);break}}},{key:"logAction",value:function(e,t){for(var a=JSON.parse(localStorage.getItem("users")),n=a.length-1;n>=0;n--)if(a[n].Name===localStorage.getItem("currentUser")){t,e;var s=[];s.push(Date.now()),s.push(e);var i=0;i=0===JSON.parse(localStorage.getItem("viewInit"))?"list mode":"tinder mode",s.push(i),s.push(t),a[n].Log.push(s),localStorage.setItem("users",JSON.stringify(a));break}}},{key:"endSwipe",value:function(){this.setState({swiping:!1}),this.setState({shadownr:0});var e={};this.setState({translation:e,transparency:e})}},{key:"swiped",value:function(e,t){this.setState({swiping:!0}),this.setState({shadownr:e.deltaX});var a=-1*e.deltaX,n={};n[t]="translate("+a+"px,0%)";var s={};s[t]=10/Math.abs(e.deltaX),this.setState({translation:n,transparency:s})}},{key:"getname",value:function(e){return void 0!==this.state.foods?this.state.foods[e]:""}},{key:"getimage",value:function(e){return void 0!==this.state.images?this.state.images[e]:""}},{key:"render",value:function(){return this.state.favorite?s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("div",{className:"PageHeader"}," ",s.a.createElement("b",{className:"PageTitle"},"Favorites"),s.a.createElement(d.b,{to:"/profile"},s.a.createElement("button",{title:"profile",className:"profile"},s.a.createElement("b",null," "))),s.a.createElement("button",{className:"favorites",title:"favorites",onClick:this.goToFavorites},s.a.createElement("b",null)),s.a.createElement("button",{className:"toRecommendButton",title:"recommends",onClick:this.goToRecommends},s.a.createElement("b",null))),this.generateView())):s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement("div",{className:"PageHeader"}," ",s.a.createElement("b",{className:"PageTitle"},"Let's get to know you!")),this.generateView()))}}]),t}(s.a.Component),G=(a(336),a(155),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(c.a)(this,Object(m.a)(t).call(this,e))).toggleChange=function(){a.setState({isChecked:!a.state.isChecked});for(var e=JSON.parse(localStorage.getItem("users")),t=0;t<e.length;t++)if(e[t].Name===localStorage.getItem("currentUser")){var n=e[t].booleansPreferences,s=e[t].booleanAllergies;!0===a.state.prefs?(n[a.state.id]=!n[a.state.id],e[t].booleansPreferences=n):(s[-a.state.id-1]=!s[-a.state.id-1],e[t].booleanAllergies=s)}localStorage.setItem("users",JSON.stringify(e))},a.state={isChecked:e.checked,name:e.name,id:e.id,prefs:e.prefs},a}return Object(u.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return s.a.createElement("li",null,s.a.createElement("input",{type:"checkbox",checked:this.state.isChecked,onChange:this.toggleChange,id:this.state.id}),s.a.createElement("label",{for:this.state.id},this.state.name))}}]),t}(s.a.Component)),_=function(e){function t(){var e;Object(o.a)(this,t),(e=Object(c.a)(this,Object(m.a)(t).call(this))).onTextChangedLiked=function(t){var a=t.target.value,n=[];if(a.length>0){var s=new RegExp("^".concat(a),"i");n=e.items.sort().filter((function(e){return s.test(e)}))}e.setState((function(){return{suggestionsLiked:n,textLiked:a}}))},e.onTextChangedDisliked=function(t){var a=t.target.value,n=[];if(a.length>0){var s=new RegExp("^".concat(a),"i");n=e.items.sort().filter((function(e){return s.test(e)}))}e.setState((function(){return{suggestionsDisliked:n,textDisliked:a}}))};var a=!1;if(e.amountOfLikes=0,e.amountOfDislikes=0,null!=localStorage.getItem("users"))for(var n=JSON.parse(localStorage.getItem("users")),s=0;s<n.length;s++)if(n[s].Name===localStorage.getItem("currentUser")&&n[s].Preferences&&n[s].Preferences.length&&n[s].Allergies&&n[s].Preferences){a=!0,e.amountOfDislikes=n[s].Allergies.length,e.amountOfLikes=n[s].Preferences.length;break}if(!a);return e.items=["60-minutes-or-less","time-to-make","course","main-ingredient","cuisine","preparation","occasion","north-american","side-dishes","vegetables","mexican","easy","fall","holiday-event","vegetarian","winter","dietary","christmas","seasonal","squash","30-minutes-or-less","breakfast","main-dish","pork","american","oven","kid-friendly","pizza","northeastern-united-states","meat","equipment","chili","crock-pot-slow-cooker","4-hours-or-less","eggs-dairy","potatoes","dinner-party","easter","cheese","stove-top","new-years","thanksgiving","independence-day","st-patricks-day","valentines-day","inexpensive","brunch","superbowl","presentation","served-hot","weeknight","canning","condiments-etc","heirloom-historical","amish-mennonite","number-of-servings","technique","15-minutes-or-less","low-protein","5-ingredients-or-less","beverages","fruit","low-sodium","shakes","low-calorie","low-in-something","apples","served-cold","3-steps-or-less","appetizers","canadian","vegan","freezer","south-west-pacific","hawaiian","spicy","copycat","pork-ribs","super-bowl","novelty","taste-mood","savory","sweet","pies-and-tarts","desserts","lunch","snacks","no-cook","refrigerator","frozen-desserts","pies","chocolate","breads","oamc-freezer-make-ahead","quick-breads","tropical-fruit","bananas","healthy","1-day-or-more","comfort-food","berries","strawberries","beans","potluck","to-go","greens","collard-greens","pork-chops","southwestern-united-states","deep-fry","candy","beef","one-dish-meal","lactose","bisques-cream-soups","soups-stews","spring","food-processor-blender","free-of-something","cauliflower","small-appliance","beginner-cook","low-cholesterol","low-carb","healthy-2","spinach","low-saturated-fat","high-calcium","high-in-something","very-low-carbs","sauces","eggs","savory-sauces","asian","indian","herb-and-spice-mixes","cooking-mixes","peppers","poultry","chicken","gluten-free","californian","black-beans","grilling","picnic","cookies-and-brownies","bar-cookies","brownies","gifts","casseroles","ground-beef","wild-game","deer","low-fat","summer","toddler-friendly","mixer","clear-soups","salads","pasta","pasta-rice-and-grains","for-large-groups","muffins","sandwiches","cakes","nuts","pineapple","corn","german","european","yeast","italian","lasagna","omelets-and-frittatas","for-1-or-2","romantic","ramadan","chicken-breasts","diabetic","dips","barbecue","marinades-and-rubs","finger-food","infant-baby-friendly","roast","veal","garnishes","cheesecake","grains","wedding","kosher","high-protein","mushrooms","seafood","fish","tuna","saltwater-fish","elbow-macaroni","pancakes-and-waffles","midwestern","southern-united-states","chicken-thighs-legs","salmon","indonesian","soy-tofu","tempeh","spreads","beef-ribs","grapes","smoothies","bacon","broil","pacific-northwest","tomatoes","cocktails","no-shell-fish","squid","polish","chinese","steam","onions","british-columbian","broccoli","kwanzaa","meatloaf","simply-potatoes2","rolled-cookies","drop-cookies","cake-fillings-and-frostings","lettuces","stews","lentils","danish","scandinavian","swiss","swedish","french","from-scratch","microwave","granola-and-porridge","bread-machine","asparagus","gumbo","african","cajun","shrimp","creole","shellfish","savory-pies","salad-dressings","orange-roughy","leftovers","simply-potatoes","crab","mango","curries","egg-free","roast-beef","pork-sausage","brown-bag","turkey","whole-turkey","green-yellow-beans","beef-sausage","australian","rice","brown-rice","white-rice","long-grain-rice","caribbean","central-american","stuffings-dressings","english","spaghetti","coconut","quebec","freshwater-fish","catfish","middle-eastern","lebanese","ravioli-tortellini","steak","clams","rolls-biscuits","gelatin","greek","citrus","oranges","papaya","punch","pitted-fruit","peaches","moose","wings","pasta-shells","blueberries","fudge","celebrity","south-american","sweet-sauces","russian","pork-loins","ham","burgers","biscotti","peanut-butter","baja","halloween","dairy-free","high-fiber","zucchini","puddings-and-mousses","japanese","lemon","chick-peas-garbanzos","cobblers-and-crisps","lamb-sheep","flat-shapes","turkey-burgers","carrots","penne","micro-melanesia","yams-sweet-potatoes","cinco-de-mayo","native-american","artichoke","salsas","cupcakes","puerto-rican","stir-fry","hand-formed-cookies","spanish","steaks","irish","scones","oaxacan","lime","camping","thai","polynesian","melons","jewish-ashkenazi","hanukkah","rosh-hashana","iraqi","saudi-arabian","whole-chicken","sourdough","baking","medium-grain-rice","pakistani","scottish","chutneys","somalian","non-alcoholic","mardi-gras-carnival","ontario","raspberries","crusts-pastry-dough-2","coffee-cakes","memorial-day","tex-mex","south-african","passover","new-zealand","","chowders","pressure-cooker","whitefish","halibut","bok-choys","pennsylvania-dutch","ice-cream","pears","scallops","pheasant","water-bath","stocks","tarts","chinese-new-year","chicken-livers","manicotti","szechuan","birthday","nut-free","fillings-and-frostings-chocolate","jams-and-preserves","unprocessed-freezer","cherries","chard","tilapia","colombian","welsh","short-grain-rice","kiwifruit","breakfast-eggs","eggs-breakfast","czech","filipino","turkey-breasts","cuban","perch","smoker","college","belgian","costa-rican","guatemalan","honduran","finnish","moroccan","a1-sauce","avocado","jellies","labor-day","iranian-persian","jewish-sephardi","dutch","pumpkin","cod","sole-and-flounder","plums","turkish","portuguese","soul","hungarian","georgian","brazilian","nigerian","ethiopian","fathers-day","sudanese","congolese","ecuadorean","mussels","peruvian","meatballs","egyptian","argentine","mahi-mahi","chilean","hidden-valley-ranch","dehydrator","crawfish","oatmeal","reynolds-wrap","malaysian","duck","rosh-hashanah","nepalese","eggplant","goose","icelandic","veggie-burgers","mothers-day","mashed-potatoes","chocolate-chip-cookies","vietnamese","elk","oysters","palestinian","rabbit","norwegian","lobster","main-dish-beef","beef-crock-pot","pot-roast","hunan","austrian","halloween-cocktails","libyan","april-fools-day","beef-organ-meats","beef-liver","angolan","korean","cantonese","whole-duck","halloween-cupcakes","halloween-cakes","ragu-recipe-contest","macaroni-and-cheese","trout","irish-st-patricks-day","bass","beijing","quail","pickeral","main-dish-chicken","bear","brewing","cambodian","beef-kidney","beef-sauces","spaghetti-sauce","heirloom-historical-recipes","pot-pie","dips-lunch-snacks","pressure-canning","main-dish-pork","pork-loins-roast","quiche","sugar-cookies","venezuelan","octopus","side-dishes-beans","beans-side-dishes","baked-beans","snacks-kid-friendly","snacks-sweet","duck-breasts","main-dish-pasta","pasta-salad","pasta-elbow-macaroni","namibian","mushroom-soup","beef-barley-soup","pork-crock-pot","crock-pot-main-dish","desserts-fruit","desserts-easy","lasagne","laotian","cabbage","prepared-potatoes","middle-eastern-main-dish","high-in-something-diabetic-friendly","dips-summer","black-bean-soup","bean-soup","served-hot-new-years","ham-and-bean-soup","lamb-sheep-main-dish","mongolian","for-large-groups-holiday-event","stews-poultry","pasta-rice-and-grains-elbow-macaroni","pork-loin","cranberry-sauce","marinara-sauce","breakfast-casseroles","breakfast-potatoes","main-dish-seafood","shrimp-main-dish","pumpkin-bread","bread-pudding","less_thansql:name_topics_of_recipegreater_than","chicken-crock-pot","chicken-stews","chicken-stew","Throw the ultimate fiesta with this sopaipillas recipe from Food.com.","roast-beef-main-dish","roast-beef-comfort-food"],e.state={boxes:e.getItemLocal("boxes"),suggestionsLiked:[],suggestionsDisliked:[],textLiked:"",textDisliked:""},e.success=e.success.bind(Object(f.a)(e)),e.updateAccount=e.updateAccount.bind(Object(f.a)(e)),e}return Object(u.a)(t,e),Object(l.a)(t,[{key:"getItemLocal",value:function(e){return JSON.parse(localStorage.getItem(e))}},{key:"getRender",value:function(){for(var e=this,t=JSON.parse(localStorage.getItem("users")),a=-1,n=t.length-1;n>=0;n--)if(t[n].Name===localStorage.getItem("currentUser")&&(a=n,localStorage.setItem("favorite",JSON.stringify(!1)),t[n].FirstTime)){w.a.fire({title:"Welcome!",text:"Let's set you up! First, choose your preferences and things you dislike, like allergies for example.",icon:"info",confirmButtonText:"Okay!"}),t[n].FirstTime=!1,localStorage.setItem("users",JSON.stringify(t));break}var i=[],r=[];i.push(s.a.createElement("h3",null," Things you like "));for(var o=this.state.textLiked,l=this.state.textDisliked,c=0;c<this.amountOfLikes;c++)r.push(s.a.createElement(G,{name:t[a].Preferences[c],checked:t[a].booleansPreferences[c],id:c,prefs:!0}));i.push(s.a.createElement("div",{class:"container"},s.a.createElement("ul",{class:"ks-cboxtags"}," ",r," "))),i.push(s.a.createElement("input",{className:"textBoxAdd",value:o,onChange:this.onTextChangedLiked,type:"text"})),i.push(this.renderSuggestionsLiked()),i.push(s.a.createElement("input",{className:"addButton",type:"submit",value:"Add something you like",onClick:function(){return e.doChange(o,1)}})),i.push(s.a.createElement("h3",null," Things you dislike ")),r=[];for(var m=0;m<this.amountOfDislikes;m++)r.push(s.a.createElement(G,{name:t[a].Allergies[m],checked:t[a].booleanAllergies[m],id:-m-1,prefs:!1}));return i.push(s.a.createElement("div",{class:"container"},s.a.createElement("ul",{class:"ks-cboxtags"}," ",r," "))),i.push(s.a.createElement("input",{className:"textBoxAdd",value:l,onChange:this.onTextChangedDisliked,type:"text"})),i.push(this.renderSuggestionsDisliked()),i.push(s.a.createElement("input",{className:"addButton",type:"submit",value:"Add something you dislike",onClick:function(){return e.doChange(l,2)}})),i}},{key:"success",value:function(){}},{key:"updateAccount",value:function(){for(var e=JSON.parse(localStorage.getItem("users")),t=0;t<e.length&&e[t].Name!==localStorage.getItem("currentUser");t++);localStorage.setItem("users",JSON.stringify(e)),this.success()}},{key:"renderButton",value:function(){for(var e=JSON.parse(localStorage.getItem("users")),t=e.length-1;t>=0;t--)if(e[t].Name===localStorage.getItem("currentUser"))return e[t].FirstTime1?(localStorage.setItem("users",JSON.stringify(e)),s.a.createElement(d.b,{to:"/recommendationsA"},s.a.createElement("button",{className:"NextButton Green",onClick:this.updateAccount},s.a.createElement("b",null,"Recommend!")))):s.a.createElement(d.b,{to:"/recommendations"},s.a.createElement("button",{className:"NextButton Green",onClick:this.updateAccount},s.a.createElement("b",null,"Recommend!")))}},{key:"suggestionSelectedLiked",value:function(e){this.setState((function(){return{textLiked:e,suggestionsLiked:[]}})),this.state.textLiked=e}},{key:"suggestionSelectedDisliked",value:function(e){this.setState((function(){return{textDisliked:e,suggestionsDisliked:[]}})),this.state.textDisliked=e}},{key:"renderSuggestionsLiked",value:function(){var e=this,t=this.state.suggestionsLiked;return 0===t.length?null:s.a.createElement("div",{className:"AutoCompleteText"},s.a.createElement("ul",null,t.map((function(t){return s.a.createElement("li",{onClick:function(){return e.suggestionSelectedLiked(t)}},t)}))))}},{key:"renderSuggestionsDisliked",value:function(){var e=this,t=this.state.suggestionsDisliked;return 0===t.length?null:s.a.createElement("div",{className:"AutoCompleteText"},s.a.createElement("ul",null,t.map((function(t){return s.a.createElement("li",{onClick:function(){return e.suggestionSelectedDisliked(t)}},t)}))))}},{key:"doChange",value:function(e,t){for(var a=this.items,n=JSON.parse(localStorage.getItem("users")),s=0;s<n.length;s++)if(n[s].Name===localStorage.getItem("currentUser")&&a.includes(e)&&""!==e){1===t?(n[s].Preferences.push(e),n[s].booleansPreferences.push(!0),this.amountOfLikes=this.amountOfLikes+1,this.setState((function(){return{textLiked:e}}))):2===t&&(n[s].Allergies.push(e),n[s].booleanAllergies.push(!0),this.amountOfDislikes=this.amountOfDislikes+1,this.setState((function(){return{textDisliked:e}}))),a.splice(this.items.indexOf(e),1),this.items=a;break}localStorage.setItem("users",JSON.stringify(n))}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},s.a.createElement("div",{className:"PageHeader"}," ",s.a.createElement("b",{className:"PageTitle"},"Your profile"),s.a.createElement(d.b,{to:"/profile"},s.a.createElement("button",{className:"profile"},s.a.createElement("b",null," "))),s.a.createElement(d.b,{to:"/recommendations"},s.a.createElement("button",{onClick:function(){localStorage.setItem("favorite",JSON.stringify(!0))},title:"favorites",className:"favorites"},s.a.createElement("b",null," "))),s.a.createElement(d.b,{to:"/recommendations"},s.a.createElement("button",{onClick:function(){return localStorage.setItem("favorite",JSON.stringify(!1))},title:"recommends",className:"toRecommendButton"},s.a.createElement("b",null," ")))),s.a.createElement("header",{className:"App-header"},this.getRender(),this.renderButton()))}}]),t}(s.a.Component),K=function(e){function t(){return Object(o.a)(this,t),Object(c.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(l.a)(t,[{key:"sendmessage",value:function(e){new WebSocket("ws://localhost:9000");this.socket.send(e)}},{key:"startwebsocket",value:function(){var e=this;this.socket=new WebSocket("ws://localhost:9000");var t={action:"initialise"};this.socket.onopen=function(){e.socket.send(JSON.stringify(t))},this.socket.onmessage=function(t){e.initialised=!0}}},{key:"render",value:function(){return this.initialised=!1,this.startwebsocket(),s.a.createElement(d.a,{basename:"/react-auth-ui/"},s.a.createElement("div",{className:"App"},s.a.createElement(g.c,null,s.a.createElement(g.a,{exact:!0,path:"/test",component:H}),s.a.createElement(g.a,{exact:!0,path:"/",component:B}),s.a.createElement(g.a,{exact:!0,path:"/recommendations",component:j}),s.a.createElement(g.a,{exact:!0,path:"/profile",component:_}),s.a.createElement(g.a,{exact:!0,path:"/tinderCards",component:P}),s.a.createElement(g.a,{exact:!0,path:"/home",component:h}),s.a.createElement(g.a,{exact:!0,path:"/gettingToKnow",component:j}),s.a.createElement(g.a,{exact:!0,path:"/recommendationsA",component:W}))))}}],[{key:"socketchange",value:function(e){this.socket.onopen=e}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(s.a.createElement(K,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},62:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){}},[[182,1,2]]]);
//# sourceMappingURL=main.8dc4f1e8.chunk.js.map